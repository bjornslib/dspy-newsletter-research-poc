[
  {
    "id": "F001",
    "description": "Add Location dropdown to aura-call page UI",
    "steps": [
      "Navigate to aura-call page at localhost:5001",
      "Verify Location dropdown renders with 'Australia' and 'Singapore' options",
      "Verify dropdown has default value 'Australia'",
      "Verify dropdown state updates when selection changes"
    ],
    "passes": true,
    "scope": [
      "agencheck-support-frontend/app/aura-call/page.tsx"
    ],
    "validation": "browser",
    "worker_type": "frontend",
    "dependencies": []
  },
  {
    "id": "F002",
    "description": "Add Phone Type dropdown to aura-call page UI",
    "steps": [
      "Navigate to aura-call page at localhost:5001",
      "Verify Phone Type dropdown renders with options: 'Unknown', 'Target Caller', 'Reception', 'HR'",
      "Verify dropdown has default value 'Unknown'",
      "Verify dropdown state updates when selection changes"
    ],
    "passes": true,
    "scope": [
      "agencheck-support-frontend/app/aura-call/page.tsx"
    ],
    "validation": "browser",
    "worker_type": "frontend",
    "dependencies": [
      "F001"
    ]
  },
  {
    "id": "F003",
    "description": "Add Target Name text input to aura-call page UI",
    "steps": [
      "Navigate to aura-call page at localhost:5001",
      "Verify Target Name text input renders",
      "Verify placeholder text 'HR Manager' or similar",
      "Type 'John Smith' and verify state updates",
      "Verify input accepts alphanumeric characters and spaces"
    ],
    "passes": true,
    "scope": [
      "agencheck-support-frontend/app/aura-call/page.tsx"
    ],
    "validation": "browser",
    "worker_type": "frontend",
    "dependencies": [
      "F002"
    ]
  },
  {
    "id": "F004",
    "description": "Add Resume dropdown to aura-call page UI",
    "steps": [
      "Navigate to aura-call page at localhost:5001",
      "Verify Resume dropdown renders with option 'Bjorn Schliebitz'",
      "Verify dropdown has default value 'bjorn-schliebitz'",
      "Verify dropdown state updates when selection changes"
    ],
    "passes": true,
    "scope": [
      "agencheck-support-frontend/app/aura-call/page.tsx"
    ],
    "validation": "browser",
    "worker_type": "frontend",
    "dependencies": [
      "F003"
    ]
  },
  {
    "id": "F005",
    "description": "Frontend form submits all parameters on outbound call",
    "steps": [
      "Navigate to aura-call page",
      "Fill all form fields: Location=Singapore, PhoneType=HR, TargetName=Test Person, Resume=Bjorn",
      "Enter phone number and click Call button",
      "Verify POST to /api/outbound-call includes all parameters in request body",
      "Check browser console for no validation errors"
    ],
    "passes": true,
    "scope": [
      "agencheck-support-frontend/app/aura-call/page.tsx"
    ],
    "validation": "browser",
    "worker_type": "frontend",
    "dependencies": [
      "F004"
    ]
  },
  {
    "id": "F006",
    "description": "Frontend form submits all parameters on web call",
    "steps": [
      "Navigate to aura-call page",
      "Fill all form fields: Location=Australia, PhoneType=Target Caller, TargetName=Jane Doe, Resume=Bjorn",
      "Click 'Start Web Call' button",
      "Verify web call initiation includes all parameters",
      "Check browser console for no validation errors"
    ],
    "passes": true,
    "scope": [
      "agencheck-support-frontend/app/aura-call/page.tsx"
    ],
    "validation": "browser",
    "worker_type": "frontend",
    "dependencies": [
      "F005"
    ]
  },
  {
    "id": "F007",
    "description": "API route accepts new parameters in request body",
    "steps": [
      "POST to /api/outbound-call with body: {phoneNumber, location, phoneType, targetName, resumeId}",
      "Verify 200 response",
      "Verify response includes dispatch ID",
      "Check server logs confirm parameters received"
    ],
    "passes": true,
    "scope": [
      "agencheck-support-frontend/app/api/outbound-call/route.ts"
    ],
    "validation": "api",
    "worker_type": "frontend",
    "dependencies": [
      "F006"
    ]
  },
  {
    "id": "F008",
    "description": "API route includes new parameters in dispatch metadata",
    "steps": [
      "POST to /api/outbound-call with all parameters",
      "Verify createDispatch call includes metadata with schema_version=1",
      "Verify metadata includes: location, phone_type, target_name, resume_id",
      "Verify metadata JSON is valid and parseable"
    ],
    "passes": true,
    "scope": [
      "agencheck-support-frontend/app/api/outbound-call/route.ts"
    ],
    "validation": "api",
    "worker_type": "frontend",
    "dependencies": [
      "F007"
    ]
  },
  {
    "id": "F009",
    "description": "Add phone_type field to CandidateInfo dataclass",
    "steps": [
      "Open verification_agents.py",
      "Verify CandidateInfo has phone_type field with type str",
      "Verify default value is 'unknown'",
      "Verify phone_type is used in dataclass initialization"
    ],
    "passes": true,
    "scope": [
      "agencheck-communication-agent/livekit_prototype/cli_poc/voice_agent/verification_agents.py"
    ],
    "validation": "unit",
    "worker_type": "backend",
    "dependencies": []
  },
  {
    "id": "F010",
    "description": "Agent entrypoint parses location from metadata",
    "steps": [
      "Review agent.py entrypoint function",
      "Verify meta.get('location', 'australia') extracts location",
      "Verify location is passed to CandidateInfo constructor",
      "Verify fallback to 'australia' if not provided"
    ],
    "passes": true,
    "scope": [
      "agencheck-communication-agent/livekit_prototype/cli_poc/voice_agent/agent.py"
    ],
    "validation": "unit",
    "worker_type": "backend",
    "dependencies": [
      "F009"
    ]
  },
  {
    "id": "F011",
    "description": "Agent entrypoint parses phone_type from metadata",
    "steps": [
      "Review agent.py entrypoint function",
      "Verify meta.get('phone_type', 'unknown') extracts phone_type",
      "Verify phone_type is passed to CandidateInfo constructor",
      "Verify fallback to 'unknown' if not provided"
    ],
    "passes": true,
    "scope": [
      "agencheck-communication-agent/livekit_prototype/cli_poc/voice_agent/agent.py"
    ],
    "validation": "unit",
    "worker_type": "backend",
    "dependencies": [
      "F010"
    ]
  },
  {
    "id": "F012",
    "description": "Agent entrypoint parses target_name from metadata",
    "steps": [
      "Review agent.py entrypoint function",
      "Verify meta.get('target_name', 'HR Manager') extracts target_name",
      "Verify target_name is passed to CandidateInfo constructor",
      "Verify fallback to 'HR Manager' if not provided"
    ],
    "passes": true,
    "scope": [
      "agencheck-communication-agent/livekit_prototype/cli_poc/voice_agent/agent.py"
    ],
    "validation": "unit",
    "worker_type": "backend",
    "dependencies": [
      "F011"
    ]
  },
  {
    "id": "F013",
    "description": "Agent entrypoint implements RESUME_MAP lookup",
    "steps": [
      "Review agent.py for RESUME_MAP constant",
      "Verify RESUME_MAP has 'bjorn-schliebitz' key mapping to resume path",
      "Verify meta.get('resume_id', 'bjorn-schliebitz') extracts resume_id",
      "Verify resume_path = RESUME_MAP.get(resume_id, DEFAULT_RESUME)",
      "Verify _load_resume_data(resume_path) uses resolved path"
    ],
    "passes": true,
    "scope": [
      "agencheck-communication-agent/livekit_prototype/cli_poc/voice_agent/agent.py"
    ],
    "validation": "unit",
    "worker_type": "backend",
    "dependencies": [
      "F012"
    ]
  },
  {
    "id": "F014",
    "description": "NavigationAgent receives phone_type in CandidateInfo",
    "steps": [
      "Review NavigationAgent.__init__ in verification_agents.py",
      "Verify candidate_info parameter includes phone_type",
      "Verify phone_type is accessible as self.candidate_info.phone_type",
      "Verify no errors when creating NavigationAgent with phone_type='target_caller'"
    ],
    "passes": true,
    "scope": [
      "agencheck-communication-agent/livekit_prototype/cli_poc/voice_agent/verification_agents.py"
    ],
    "validation": "unit",
    "worker_type": "backend",
    "dependencies": [
      "F009",
      "F013"
    ]
  },
  {
    "id": "F015",
    "description": "NavigationAgent prompt adapts to phone_type='target_caller'",
    "steps": [
      "Review get_navigation_prompt() in verification_prompts.py",
      "Verify prompt includes conditional logic for phone_type",
      "For phone_type='target_caller': verify instruction to assume answerer IS target",
      "Verify instruction to skip 'may I speak with...' question",
      "Test with CandidateInfo(phone_type='target_caller') confirms prompt adaptation"
    ],
    "passes": true,
    "scope": [
      "agencheck-communication-agent/livekit_prototype/cli_poc/voice_agent/verification_prompts.py"
    ],
    "validation": "unit",
    "worker_type": "backend",
    "dependencies": [
      "F014"
    ]
  },
  {
    "id": "F016",
    "description": "NavigationAgent prompt adapts to phone_type='reception'",
    "steps": [
      "Review get_navigation_prompt() in verification_prompts.py",
      "Verify prompt includes instructions for phone_type='reception'",
      "Verify instruction to proactively ask for transfer to HR/payroll",
      "Verify instruction to expect gatekeeping behavior",
      "Test with CandidateInfo(phone_type='reception') confirms prompt adaptation"
    ],
    "passes": true,
    "scope": [
      "agencheck-communication-agent/livekit_prototype/cli_poc/voice_agent/verification_prompts.py"
    ],
    "validation": "unit",
    "worker_type": "backend",
    "dependencies": [
      "F015"
    ]
  },
  {
    "id": "F017",
    "description": "NavigationAgent prompt adapts to phone_type='hr'",
    "steps": [
      "Review get_navigation_prompt() in verification_prompts.py",
      "Verify prompt includes instructions for phone_type='hr'",
      "Verify instruction to jump directly to verification intro after greeting",
      "Verify instruction assumes HR person understands verification purpose",
      "Test with CandidateInfo(phone_type='hr') confirms prompt adaptation"
    ],
    "passes": true,
    "scope": [
      "agencheck-communication-agent/livekit_prototype/cli_poc/voice_agent/verification_prompts.py"
    ],
    "validation": "unit",
    "worker_type": "backend",
    "dependencies": [
      "F016"
    ]
  },
  {
    "id": "F018",
    "description": "NavigationAgent prompt adapts to phone_type='unknown'",
    "steps": [
      "Review get_navigation_prompt() in verification_prompts.py",
      "Verify prompt includes instructions for phone_type='unknown'",
      "Verify instruction for default behavior with speaker identification",
      "Verify instruction to identify speaker then determine if target or need transfer",
      "Test with CandidateInfo(phone_type='unknown') confirms default behavior"
    ],
    "passes": true,
    "scope": [
      "agencheck-communication-agent/livekit_prototype/cli_poc/voice_agent/verification_prompts.py"
    ],
    "validation": "unit",
    "worker_type": "backend",
    "dependencies": [
      "F017"
    ]
  },
  {
    "id": "F019",
    "description": "NavigationAgent implements speaker name identification",
    "steps": [
      "Review NavigationAgent in verification_agents.py",
      "Verify logic to listen for self-introduction in first utterance",
      "Verify fallback to ask 'May I ask who I'm speaking with?' if no intro",
      "Verify speaker name stored in session.userdata['speaker_name']",
      "Verify speaker name passed in handoff context to VerificationAgent"
    ],
    "passes": true,
    "scope": [
      "agencheck-communication-agent/livekit_prototype/cli_poc/voice_agent/verification_agents.py",
      "agencheck-communication-agent/livekit_prototype/cli_poc/voice_agent/verification_prompts.py"
    ],
    "validation": "unit",
    "worker_type": "backend",
    "dependencies": [
      "F018"
    ]
  },
  {
    "id": "F020",
    "description": "End-to-end test: Outbound call with all parameters",
    "steps": [
      "Start frontend (localhost:5001) and backend services",
      "Navigate to aura-call page",
      "Fill form: Location=Singapore, PhoneType=HR, TargetName=Test Contact, Resume=Bjorn",
      "Enter test phone number and click Call",
      "Verify agent receives metadata in entrypoint",
      "Verify NavigationAgent uses Singapore terminology and HR behavior",
      "Check Logfire traces confirm all parameters passed correctly"
    ],
    "passes": true,
    "scope": [
      "agencheck-support-frontend/app/aura-call/page.tsx",
      "agencheck-support-frontend/app/api/outbound-call/route.ts",
      "agencheck-communication-agent/livekit_prototype/cli_poc/voice_agent/agent.py",
      "agencheck-communication-agent/livekit_prototype/cli_poc/voice_agent/verification_agents.py",
      "agencheck-communication-agent/livekit_prototype/cli_poc/voice_agent/verification_prompts.py"
    ],
    "validation": "browser",
    "worker_type": "general",
    "dependencies": [
      "F008",
      "F019"
    ]
  },
  {
    "id": "F021",
    "description": "End-to-end test: Web call with all parameters",
    "steps": [
      "Start frontend (localhost:5001) and backend services",
      "Navigate to aura-call page",
      "Fill form: Location=Australia, PhoneType=Target Caller, TargetName=Jane Smith, Resume=Bjorn",
      "Click 'Start Web Call' button",
      "Verify agent receives metadata in entrypoint",
      "Verify NavigationAgent uses Australian terminology and target_caller behavior",
      "Verify web call connects successfully with agent",
      "Check Logfire traces confirm all parameters passed correctly"
    ],
    "passes": true,
    "scope": [
      "agencheck-support-frontend/app/aura-call/page.tsx",
      "agencheck-communication-agent/livekit_prototype/cli_poc/voice_agent/agent.py",
      "agencheck-communication-agent/livekit_prototype/cli_poc/voice_agent/verification_agents.py",
      "agencheck-communication-agent/livekit_prototype/cli_poc/voice_agent/verification_prompts.py"
    ],
    "validation": "browser",
    "worker_type": "general",
    "dependencies": [
      "F006",
      "F019"
    ]
  },
  {
    "id": "F022",
    "description": "Token endpoint forwards parameters to agent metadata for web calls",
    "steps": [
      "Update /api/livekit/token/route.ts to extract all parameters from request body",
      "Include location, phone_type, target_name, resume_id in agent metadata",
      "Use snake_case naming for metadata fields",
      "Test web call receives parameters in agent entrypoint",
      "Verify agent logs show parsed metadata values"
    ],
    "passes": true,
    "scope": [
      "agencheck-support-frontend/app/api/livekit/token/route.ts"
    ],
    "validation": "api",
    "worker_type": "frontend",
    "dependencies": [
      "F006",
      "F019"
    ]
  },
  {
    "id": "F023",
    "description": "Fix phone_type parameter passing to NavigationAgent prompt",
    "steps": [
      "Update NavigationAgent.__init__ in verification_agents.py",
      "Add phone_type=candidate_info.phone_type to get_navigation_prompt() call",
      "Verify phone_type adaptations (F015-F018) now activate correctly",
      "Test with phone_type=target_caller confirms direct identity flow",
      "Python syntax validation"
    ],
    "passes": true,
    "scope": [
      "agencheck-communication-agent/livekit_prototype/cli_poc/voice_agent/verification_agents.py"
    ],
    "validation": "unit",
    "worker_type": "backend",
    "dependencies": [
      "F015",
      "F016",
      "F017",
      "F018"
    ]
  },
  {
    "id": "F024",
    "description": "Restrict NavigationAgent to only candidate_name and company",
    "steps": [
      "Remove position parameter from get_navigation_prompt() call",
      "Remove target_contact from NavigationAgent visibility",
      "Verify PERSONALITY formatting works with only name/company",
      "Confirm NavigationAgent cannot disclose position details",
      "Validate prompt size reduction"
    ],
    "passes": true,
    "scope": [
      "agencheck-communication-agent/livekit_prototype/cli_poc/voice_agent/verification_agents.py",
      "agencheck-communication-agent/livekit_prototype/cli_poc/voice_agent/verification_prompts.py"
    ],
    "validation": "unit",
    "worker_type": "backend",
    "dependencies": [
      "F023"
    ]
  },
  {
    "id": "F025",
    "description": "Fix target_name instruction - clarify candidate vs target distinction",
    "steps": [
      "Update NAVIGATION_PROMPT to clarify target can be mentioned by name",
      "Change line 1528 from \"Only reveal target contact name if caller asks\" to \"Ask for target by name when routing\"",
      "Add explicit distinction: candidate name = sensitive, target name = routing info",
      "Verify instructions no longer conflict with phone_type scenarios",
      "Test prompt generation confirms target_name usage clear"
    ],
    "passes": true,
    "scope": [
      "agencheck-communication-agent/livekit_prototype/cli_poc/voice_agent/verification_prompts.py"
    ],
    "validation": "unit",
    "worker_type": "backend",
    "dependencies": [
      "F024"
    ]
  },
  {
    "id": "F026",
    "description": "Rename target → contact_person throughout codebase for clarity",
    "steps": [
      "Rename CandidateInfo.target_contact → contact_person_name",
      "Rename all target_contact_name parameters → contact_person_name",
      "Rename target_name variables → contact_person_name",
      "Rename phone_type value target_caller → direct_contact",
      "Update all prompt text references: target → contact person",
      "Update API parameters: targetName → contactPersonName",
      "Update metadata fields: target_name → contact_person_name",
      "Verify all tests pass with new naming",
      "Update documentation with new terminology"
    ],
    "passes": true,
    "scope": [
      "agencheck-communication-agent/livekit_prototype/cli_poc/voice_agent/verification_agents.py",
      "agencheck-communication-agent/livekit_prototype/cli_poc/voice_agent/verification_prompts.py",
      "agencheck-communication-agent/livekit_prototype/cli_poc/voice_agent/agent.py",
      "agencheck-support-frontend/app/aura-call/page.tsx",
      "agencheck-support-frontend/app/api/outbound-call/route.ts",
      "agencheck-support-frontend/app/api/livekit/token/route.ts"
    ],
    "validation": "unit",
    "worker_type": "general",
    "dependencies": [
      "F025"
    ]
  },
  {
    "id": "F027",
    "description": "Update frontend dropdown: target_caller → direct_contact",
    "steps": [
      "Update page.tsx phoneType enum: target_caller → direct_contact",
      "Update VoiceInterface.tsx phoneType type",
      "Update dropdown option value and text: Target Caller → Direct Contact",
      "Verify build + lint passing",
      "Test dropdown shows Direct Contact in browser"
    ],
    "passes": true,
    "scope": [
      "agencheck-support-frontend/app/aura-call/page.tsx",
      "agencheck-support-frontend/components/aura-call/VoiceInterface.tsx"
    ],
    "validation": "browser",
    "worker_type": "frontend",
    "dependencies": [
      "F026"
    ]
  },
  {
    "id": "F028",
    "description": "Add explicit instruction: MUST share contact_person_name when asked",
    "steps": [
      "Update line 1530 to add: MUST share promptly when asked who you want to speak with",
      "Add example: Question: Who do you want? Answer: {contact_person_name}",
      "Remove ambiguity about when to share contact_person_name",
      "Verify instruction is clear and directive",
      "Test prompt generation"
    ],
    "passes": true,
    "scope": [
      "agencheck-communication-agent/livekit_prototype/cli_poc/voice_agent/verification_prompts.py"
    ],
    "validation": "unit",
    "worker_type": "backend",
    "dependencies": [
      "F026"
    ]
  }
]
